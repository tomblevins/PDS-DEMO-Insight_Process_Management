<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ux_client_script">
    <sys_ux_client_script action="INSERT_OR_UPDATE">
        <includes/>
        <macroponent display_value="DA Modal Ref Tree Lookup">1f2f8a051bec71500f0eda43cc4bcbb9</macroponent>
        <name>Content Tree Row Click Handler</name>
        <preset/>
        <required_translations>[ ]</required_translations>
        <script><![CDATA[function handler({ api, event, helpers, imports }) {
	let rowPayload;
	const newValue = event.payload.value;
	const newDisplayValue = event.payload.displayValue;
	const { value, displayValue } = api.state.selectedItems;
	const { fieldType, referenceField } = api.context.props;
	const getRowClickedPayload = ({
		referenceField,
		value,
		sys_id,
		displayValue
	}) => ({
		referenceField,
		row: {
			referenceKeyValue: {
				value
			},
			sys_id: {
				value: sys_id
			},
			displayValue: {
				value: displayValue
			}
		}
	});

	if (fieldType === 'glide_list') {
		const isSelected = event.payload.isSelected;
		if (!isSelected) {
			const newStateValue = value.filter(val => val !== event.payload.value);
			const newStateDisplayValue = displayValue.filter(
				val => val != event.payload.displayValue
			);
			api.setState('selectedItems', {
				value: newStateValue,
				displayValue: newStateDisplayValue
			});
		} else {
			const newStateValue = [...value, event.payload.value];
			const newStateDisplayValue = [
				...displayValue,
				event.payload.displayValue
			];
			api.setState('selectedItems', {
				value: newStateValue,
				displayValue: newStateDisplayValue
			});
		}
	} else {
		rowPayload = getRowClickedPayload({
			referenceField,
			value: newValue,
			sys_id: event.payload.value,
			displayValue: newDisplayValue
		});
		if (rowPayload) {
			api.emit('REF_PICK#ROW_CLICKED', rowPayload);
			api.emit('MODAL_SELECTED_RELAY_d7f8b70dff13101035be517f793bf1e0', {
				showModal: false
			});
		}
	}
}
]]></script>
        <script_api_version>2.0.0</script_api_version>
        <sys_class_name>sys_ux_client_script</sys_class_name>
        <sys_created_by>TBlev1</sys_created_by>
        <sys_created_on>2023-08-07 17:47:25</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>af2fca051bec71500f0eda43cc4bcb83</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Content Tree Row Click Handler</sys_name>
        <sys_package display_value="Insight Process Management" source="x_snc_insight_pr_0">39bd5e9747f05510ab51f109536d431c</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Insight Process Management">39bd5e9747f05510ab51f109536d431c</sys_scope>
        <sys_update_name>sys_ux_client_script_af2fca051bec71500f0eda43cc4bcb83</sys_update_name>
        <sys_updated_by>TBlev1</sys_updated_by>
        <sys_updated_on>2023-08-07 17:47:25</sys_updated_on>
        <target>macroponent</target>
        <type>default</type>
    </sys_ux_client_script>
</record_update>
